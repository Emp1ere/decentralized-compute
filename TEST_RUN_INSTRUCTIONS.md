# Инструкция по запуску тестов

## Проблема
Из-за кириллицы в пути (`Рабочий стол`) PowerShell не может корректно обработать команды.

## Решения

### Вариант 1: Через командную строку (CMD)
1. Откройте **Командную строку** (cmd.exe, не PowerShell)
2. Выполните:
   ```cmd
   cd /d "C:\Users\Alexandra\OneDrive\Рабочий стол\Прогер\distributed-compute"
   run_tests.bat
   ```

### Вариант 2: Через Python напрямую
1. Откройте командную строку или PowerShell
2. Перейдите в директорию проекта:
   ```cmd
   cd orchestrator_node
   ```
3. Запустите тесты:
   ```cmd
   python -m pytest tests/ -v --tb=short
   ```

### Вариант 3: Через IDE (рекомендуется)
Если используете PyCharm, VS Code или другую IDE:
1. Откройте проект в IDE
2. Найдите папку `orchestrator_node/tests`
3. Правой кнопкой → "Run pytest in tests"

### Вариант 4: Использовать короткий путь Windows
1. Узнайте короткий путь (8.3 формат):
   ```cmd
   dir /x "C:\Users\Alexandra\OneDrive"
   ```
2. Используйте короткий путь вместо полного

## Что проверяют тесты

### Unit-тесты (`tests/unit/`):
- `test_contracts.py`: верификация контрактов, проверка nonce, валидация
- `test_blockchain.py`: создание блоков, приём от пира, замена цепочки, replay-защита, комиссии

### Интеграционные тесты (`tests/integration/`):
- `test_api.py`: регистрация, get_task, submit_work, get_balance, health, metrics, chain

## Ожидаемый результат
Все тесты должны пройти успешно после внесённых критических исправлений:
- ✅ Блокировка при создании блока
- ✅ Синхронизация pending
- ✅ Правило выбора блока при форке
