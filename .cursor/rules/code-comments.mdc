# Правило добавления комментариев в код

## Общие принципы

- **Комментарии должны объяснять "почему", а не "что"** — код сам говорит, что делается
- **Избегать очевидных комментариев** — не комментировать то, что понятно из названия функции/переменной
- **Комментировать сложную логику** — алгоритмы, бизнес-правила, неочевидные решения

## Частота добавления комментариев

### Обязательно комментировать:

1. **Функции и методы:**
   - Все публичные функции/методы должны иметь docstring или комментарий с описанием назначения
   - Функции с неочевидной логикой — подробный комментарий
   - Функции с побочными эффектами — описание эффектов

2. **Сложная логика:**
   - Алгоритмы (более 10 строк)
   - Бизнес-правила и валидации
   - Обработка ошибок с неочевидной логикой
   - Работа с внешними API/базами данных

3. **Критические участки:**
   - Безопасность (аутентификация, авторизация, валидация)
   - Консенсус и синхронизация в распределённых системах
   - Обработка транзакций и финансовых операций

4. **Неочевидные решения:**
   - Workaround для известных проблем
   - Оптимизации, влияющие на читаемость
   - Выбор конкретной библиотеки/подхода

### Не обязательно комментировать:

- Простые геттеры/сеттеры
- Очевидные операции (присваивание, простые условия)
- Стандартные паттерны (CRUD, REST API endpoints)
- Переменные с понятными названиями

## Формат комментариев

### Python:
```python
def complex_function(param1, param2):
    """
    Краткое описание функции.
    
    Подробное описание, если нужно.
    
    Args:
        param1: Описание параметра
        param2: Описание параметра
    
    Returns:
        Описание возвращаемого значения
    
    Raises:
        ValueError: Когда возникает
    """
    # Комментарий к сложной логике внутри функции
    if some_condition:
        # Почему делается именно так
        do_something()
```

### JavaScript:
```javascript
/**
 * Краткое описание функции
 * @param {string} param1 - Описание параметра
 * @returns {Promise<Object>} Описание возвращаемого значения
 */
async function complexFunction(param1) {
    // Комментарий к сложной логике
    if (someCondition) {
        // Почему делается именно так
        doSomething();
    }
}
```

## Примеры хороших комментариев

✅ **Хорошо:**
```python
# Критическое исправление: синхронизация pending транзакций с пиром перед созданием блока.
# Это предотвращает создание блоков с разными транзакциями на разных узлах.
def sync_pending_from_peer():
    ...
```

✅ **Хорошо:**
```javascript
// Проверяем лимит перед каждой попыткой добавления, так как между проверкой
// и добавлением может произойти изменение состояния другим потоком
if (len(blockchain.pending_transactions) >= MAX_PENDING_TOTAL) {
    break;
}
```

❌ **Плохо:**
```python
# Увеличиваем счётчик
counter += 1

# Вызываем функцию
do_something()
```

## Приоритеты при добавлении комментариев

1. **Критичные участки** (безопасность, консенсус, транзакции)
2. **Сложная бизнес-логика** (алгоритмы, валидации)
3. **Неочевидные решения** (workaround, оптимизации)
4. **Публичные API** (функции, доступные извне)
